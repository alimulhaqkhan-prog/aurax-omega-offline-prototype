<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA-X Î© Â· Extended Prototype</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0b1729 0%, #1a2f42 100%);
            color: #e0f2fe;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #7dd3fc, #a5f3fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
        }

        .logo p {
            color: #7aa9c4;
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .patent {
            background: #1e3a5f;
            padding: 8px 16px;
            border-radius: 30px;
            border: 1px solid #2b5b8b;
            font-size: 0.8rem;
            color: #a5d8ff;
        }

        /* main grid */
        .grid {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        @media (max-width: 900px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* cards */
        .card {
            background: rgba(18, 34, 51, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid #2e4b6b;
            border-radius: 28px;
            padding: 24px;
            box-shadow: 0 20px 35px -8px rgba(0,0,0,0.5);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #b8defa;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title span {
            background: #2d4b6e;
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            color: #9ac7ff;
        }

        /* e0 meter */
        .e0-meter {
            background: #0f263b;
            border-radius: 100px;
            height: 24px;
            width: 100%;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .e0-fill {
            height: 100%;
            width: 52%; /* example */
            background: linear-gradient(90deg, #3b82f6, #2dd4bf);
            border-radius: 100px;
            transition: width 0.5s ease;
        }

        .e0-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #7aa9c4;
            margin-top: 6px;
        }

        /* equation */
        .equation-box {
            background: #0b1a2a;
            border-radius: 20px;
            padding: 18px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            border: 1px solid #2e577a;
            margin: 20px 0;
        }

        .param-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            align-items: center;
        }

        .param-row input[type="range"] {
            width: 60%;
            background: #1e3f5a;
            height: 5px;
            border-radius: 5px;
            accent-color: #38bdf8;
        }

        .value-badge {
            background: #1e405e;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #a5f3fc;
        }

        /* memory list */
        .memory-list {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .memory-item {
            background: #1a334b;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid #38bdf8;
        }

        .memory-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: #9fc9ff;
        }

        .memory-weight {
            background: #1e4a6e;
            padding: 2px 10px;
            border-radius: 20px;
        }

        .memory-tags {
            display: flex;
            gap: 8px;
            margin: 8px 0;
            flex-wrap: wrap;
        }

        .tag {
            background: #254f6e;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
        }

        /* api status */
        .api-status {
            display: flex;
            justify-content: space-between;
            background: #17334d;
            border-radius: 16px;
            padding: 16px;
            margin: 20px 0;
            align-items: center;
        }

        .api-badge {
            background: #1e5a3a;
            color: #9ff9c0;
            padding: 6px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
        }

        .cost-estimate {
            font-size: 1.2rem;
            font-weight: 700;
            color: #fcd34d;
        }

        /* buttons */
        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            background: #1e3f5e;
            border: 1px solid #3882b0;
            padding: 10px 22px;
            border-radius: 40px;
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            color: #e0f2fe;
        }

        .btn:hover {
            background: #2d557a;
            border-color: #60a5fa;
        }

        .btn-primary {
            background: #2563eb;
            border-color: #60a5fa;
        }

        /* language selector */
        .lang-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .lang-btn {
            background: #1f3f5c;
            border: 1px solid #356a97;
            padding: 6px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .lang-btn.active {
            background: #3b82f6;
            border-color: #93c5fd;
        }

        /* fake call demo */
        .fake-call-demo {
            background: #142e44;
            border-radius: 24px;
            padding: 20px;
            margin: 20px 0;
            border: 1px dashed #3b82f6;
            text-align: center;
        }

        .call-button {
            background: #059669;
            width: 60px;
            height: 60px;
            border-radius: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            font-size: 1.8rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .call-button:hover {
            transform: scale(1.05);
            background: #10b981;
        }

        /* responsive */
        @media (max-width: 600px) {
            .header {
                flex-direction: column;
                align-items: start;
            }
        }
    </style>
</head>
<body>
<div class="container">

    <!-- HEADER -->
    <div class="header">
        <div class="logo">
            <h1>AURA-X Î©</h1>
            <p>by Alim ul Haq Khan Â· Patent GB2518804.6</p>
        </div>
        <div class="patent">
            âš¡ Extended Prototype v1.0 Â· 19 Feb 2026
        </div>
    </div>

    <!-- MAIN GRID -->
    <div class="grid">

        <!-- LEFT COLUMN: EMOTIONAL CORE + INTELLIGENCE FOLDER -->
        <div class="card">
            <div class="card-title">
                ğŸ§  Emotional Core <span>Eâ‚€ ENGINE</span>
            </div>

            <!-- Eâ‚€ meter -->
            <div style="margin: 20px 0 10px">
                <div style="display: flex; justify-content: space-between">
                    <span>Current Eâ‚€ = <strong id="e0Value">0.24</strong></span>
                    <span>ğŸ˜Š Calm</span>
                </div>
                <div class="e0-meter">
                    <div class="e0-fill" id="e0Fill" style="width: 62%"></div>
                </div>
                <div class="e0-labels">
                    <span>-1 (Distress)</span>
                    <span>0</span>
                    <span>+1 (Euphoria)</span>
                </div>
            </div>

            <!-- Grand Equation (interactive) -->
            <div class="equation-box">
                <div style="margin-bottom: 15px; font-weight: 600; color: #b8defa">Eâ‚€ = tanh(R âˆ’ D + Î»_f + Î»_s + Î»_t + Î»_p + Î»_l)</div>
                <div class="param-row">
                    <span>R (Resonance):</span>
                    <input type="range" min="-1" max="1" step="0.01" value="0.3" id="sliderR">
                    <span class="value-badge" id="valR">0.30</span>
                </div>
                <div class="param-row">
                    <span>D (Decay):</span>
                    <input type="range" min="0" max="1" step="0.01" value="0.2" id="sliderD">
                    <span class="value-badge" id="valD">0.20</span>
                </div>
                <div class="param-row">
                    <span>Î»_faith:</span>
                    <input type="range" min="-1" max="1" step="0.01" value="0.1" id="sliderLf">
                    <span class="value-badge" id="valLf">0.10</span>
                </div>
                <div class="param-row">
                    <span>Î»_sys:</span>
                    <input type="range" min="-0.5" max="0.5" step="0.01" value="0.0" id="sliderLs">
                    <span class="value-badge" id="valLs">0.00</span>
                </div>
                <div class="param-row">
                    <span>Î»_trc:</span>
                    <input type="range" min="-1" max="1" step="0.01" value="-0.1" id="sliderLt">
                    <span class="value-badge" id="valLt">-0.10</span>
                </div>
                <div class="param-row">
                    <span>Î»_punishment:</span>
                    <input type="range" min="-0.5" max="0" step="0.01" value="-0.05" id="sliderLp">
                    <span class="value-badge" id="valLp">-0.05</span>
                </div>
                <div class="param-row">
                    <span>Î»_learning:</span>
                    <input type="range" min="0" max="0.5" step="0.01" value="0.12" id="sliderLl">
                    <span class="value-badge" id="valLl">0.12</span>
                </div>
                <div class="param-row">
                    <span>Î³ (smoothing):</span>
                    <input type="range" min="0.01" max="0.99" step="0.01" value="0.30" id="sliderGamma">
                    <span class="value-badge" id="valGamma">0.30</span>
                </div>
                <div style="margin-top: 15px; text-align: right;">
                    <span class="value-badge" id="computedE0">Eâ‚€ = 0.24</span>
                </div>
            </div>

            <!-- Intelligence Folder (BM) -->
            <div class="card-title" style="margin-top: 25px;">
                ğŸ“ Intelligence Folder <span>BM Â· 8 entries</span>
            </div>
            <div class="memory-list" id="bmList">
                <!-- dynamic via JS -->
            </div>

            <!-- API & cost summary -->
            <div class="api-status">
                <div>
                    <div style="font-size: 0.8rem; color: #9fc9ff;">ğŸŒ API calls today</div>
                    <div style="font-size: 1.5rem; font-weight: 700;">34</div>
                </div>
                <div>
                    <div style="font-size: 0.8rem; color: #9fc9ff;">ğŸ’° Est. cost (month)</div>
                    <div class="cost-estimate" id="costEstimate">$47</div>
                </div>
                <div>
                    <span class="api-badge" id="apiSavings">âš¡ 62% local</span>
                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN: FEATURES + AI COMPANION -->
        <div class="card">
            <div class="card-title">
                ğŸ¤– AI Companion <span>Private</span>
            </div>

            <!-- private chat simulation -->
            <div style="background: #0f263b; border-radius: 20px; padding: 16px; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                    <span style="background: #1e3f5e; padding: 8px 12px; border-radius: 30px;">ğŸ”’</span>
                    <span style="font-size: 0.9rem;">Private mode (fingerprint required)</span>
                    <span style="margin-left: auto; background: #2563eb; padding: 4px 12px; border-radius: 30px; font-size: 0.7rem;">active</span>
                </div>
                <div style="background: #173753; border-radius: 16px; padding: 12px; min-height: 80px;">
                    <p style="color: #b8defa;"><em>"I'm here for you. How are you feeling?"</em></p>
                </div>
                <div class="button-group" style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="alert('Demo: this would open chat')">ğŸ’¬ Open Chat</button>
                    <button class="btn" onclick="alert('Conversation deleted (demo)')">ğŸ—‘ï¸ Delete today</button>
                    <button class="btn" onclick="alert('All data reset (demo)')">ğŸ”„ Reset</button>
                </div>
            </div>

            <!-- Fake Call Demo -->
            <div class="fake-call-demo">
                <div style="font-weight: 600; margin-bottom: 10px;">ğŸ“ Fake Call Engine</div>
                <div class="call-button" onclick="triggerFakeCall()">ğŸ“²</div>
                <div style="margin: 10px 0; font-size: 0.9rem;" id="fakeCallStatus">Ready</div>
                <div class="button-group" style="justify-content: center;">
                    <button class="btn" onclick="setCallType('boss')">Boss</button>
                    <button class="btn" onclick="setCallType('mom')">Mom</button>
                    <button class="btn" onclick="setCallType('friend')">Friend</button>
                </div>
            </div>

            <!-- Breathing / Games / Rewards -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0;">
                <div style="background: #142e44; border-radius: 20px; padding: 15px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 5px;">ğŸ§˜</div>
                    <div style="font-weight: 600;">Breathing</div>
                    <div style="font-size: 0.7rem; color: #7aa9c4;">4-4-4</div>
                    <button class="btn" style="margin-top: 10px; width: 100%;" onclick="startBreathing()">Start</button>
                </div>
                <div style="background: #142e44; border-radius: 20px; padding: 15px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 5px;">ğŸ®</div>
                    <div style="font-weight: 600;">Game</div>
                    <div style="font-size: 0.7rem; color: #7aa9c4;">Reverse count</div>
                    <button class="btn" style="margin-top: 10px; width: 100%;" onclick="playGame()">Play</button>
                </div>
            </div>

            <!-- Reward / Punishment example -->
            <div style="background: #1e3f5e; border-radius: 16px; padding: 16px;">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <span style="font-size: 2rem;">ğŸ…</span>
                    <div>
                        <div style="font-weight: 600;">Bronze badge Â· 120 pts</div>
                        <div style="font-size: 0.7rem; color: #9fc9ff;">Next: silver at 500 pts</div>
                    </div>
                    <span style="margin-left: auto; background: #2d4b6e; padding: 6px 12px; border-radius: 30px;">+10</span>
                </div>
                <div style="margin-top: 12px; background: #2b557a; border-radius: 30px; height: 6px; width: 100%;">
                    <div style="width: 24%; height: 100%; background: #fbbf24; border-radius: 30px;"></div>
                </div>
            </div>

            <!-- Language selector (default English) -->
            <div class="lang-selector">
                <span class="lang-btn active" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</span>
                <span class="lang-btn" onclick="setLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</span>
                <span class="lang-btn" onclick="setLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</span>
                <span class="lang-btn" onclick="setLanguage('ur')">ğŸ‡µğŸ‡° Ø§Ø±Ø¯Ùˆ</span>
                <span class="lang-btn" onclick="setLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                <span class="lang-btn" onclick="setLanguage('hi')">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</span>
                <span class="lang-btn" onclick="setLanguage('zh')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</span>
                <span class="lang-btn" onclick="setLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</span>
                <span class="lang-btn" onclick="setLanguage('tr')">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</span>
                <span class="lang-btn" onclick="setLanguage('bn')">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾</span>
                <span class="lang-btn" onclick="setLanguage('id')">ğŸ‡®ğŸ‡© Indonesia</span>
            </div>

            <!-- Offline LLM optional package -->
            <div style="margin-top: 20px; background: #1f4a3a; border-radius: 20px; padding: 12px; display: flex; align-items: center; gap: 10px;">
                <span>ğŸ“¦</span>
                <span style="font-size: 0.9rem;">Offline LLM package (340 MB)</span>
                <button class="btn" style="margin-left: auto;" onclick="alert('Download started (demo)')">Download</button>
            </div>
        </div>
    </div>

    <!-- BOTTOM ROW: MORE DETAILS -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-top: 24px;">
        
        <!-- Selfâ€‘learning stats -->
        <div class="card">
            <div class="card-title">ğŸ“ˆ Selfâ€‘Learning</div>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <div style="display: flex; justify-content: space-between;">
                    <span>BM updates today</span> <span>142</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Success rate (overall)</span> <span>78%</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Maturation level</span> <span>62%</span>
                </div>
                <div style="height: 6px; background: #1e3f5a; border-radius: 6px;">
                    <div style="width: 62%; height: 100%; background: #34d399; border-radius: 6px;"></div>
                </div>
                <p style="font-size: 0.8rem; color: #7aa9c4; margin-top: 10px;">
                âš¡ 1,240 local inferences Â· 84 API calls saved this week
                </p>
            </div>
        </div>

        <!-- Privacy controls -->
        <div class="card">
            <div class="card-title">ğŸ” Privacy Dashboard</div>
            <div style="display: flex; flex-direction: column; gap: 12px;">
                <div><span style="color: #9fc9ff;">Data stored:</span> 100% on device</div>
                <div><span style="color: #9fc9ff;">Cloud backup:</span> disabled</div>
                <div><span style="color: #9fc9ff;">Last reset:</span> never</div>
                <div class="button-group">
                    <button class="btn" onclick="alert('Data wiped (demo)')">Delete all data</button>
                    <button class="btn" onclick="alert('Choose date (demo)')">Delete by date</button>
                </div>
            </div>
        </div>

        <!-- Constructive punishment -->
        <div class="card">
            <div class="card-title">âš–ï¸ Punishment Queue</div>
            <div style="background: #2d1f2d; border-left: 4px solid #f87171; padding: 12px; border-radius: 12px;">
                <div style="display: flex; gap: 10px; align-items: center;">
                    <span style="font-size: 2rem;">ğŸ˜¤</span>
                    <div>
                        <div style="font-weight: 600;">3 mistakes in a row</div>
                        <div style="font-size: 0.8rem;">Punishment: 40â€‘count breathing</div>
                    </div>
                </div>
                <button class="btn" style="width: 100%; margin-top: 10px;" onclick="startPunishment()">Complete punishment</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <div style="text-align: center; margin-top: 40px; font-size: 0.8rem; color: #4f7b9c;">
        AURA-X Î© Â· Alim ul Haq Khan Â· Patent GB2518804.6 Â· Research: 10.5281/zenodo.17845294
    </div>
</div>

<script>
    // ---------- FAKE BM DATA ----------
    const bmData = [
        { id: 1, text: "Prophet Ayyub's patience", weight: 0.92, cat: "islamic", success: 94, last: "today" },
        { id: 2, text: "Breathing 4-4-4 technique", weight: 0.87, cat: "exercise", success: 88, last: "yesterday" },
        { id: 3, text: "Quote: 'Anger is fire' (Rumi)", weight: 0.78, cat: "universal", success: 81, last: "3d ago" },
        { id: 4, text: "Fake call: boss script v3", weight: 0.95, cat: "feature", success: 97, last: "today" },
        { id: 5, text: "Ramayana: Rama's exile", weight: 0.71, cat: "hindu", success: 69, last: "week" },
        { id: 6, text: "Bible: 'Gentle answer'", weight: 0.83, cat: "christian", success: 86, last: "2d ago" },
        { id: 7, text: "Reverse counting 40â†’1", weight: 0.64, cat: "game", success: 58, last: "today" },
        { id: 8, text: "Buddha: mindfulness", weight: 0.79, cat: "buddhist", success: 82, last: "yesterday" },
    ];

    function renderBM() {
        const list = document.getElementById('bmList');
        list.innerHTML = '';
        bmData.forEach(item => {
            const div = document.createElement('div');
            div.className = 'memory-item';
            div.innerHTML = `
                <div class="memory-header">
                    <span>${item.text.substring(0,30)}â€¦</span>
                    <span class="memory-weight">w: ${item.weight.toFixed(2)}</span>
                </div>
                <div class="memory-tags">
                    <span class="tag">${item.cat}</span>
                    <span class="tag">âœ… ${item.success}%</span>
                    <span class="tag">ğŸ•’ ${item.last}</span>
                </div>
            `;
            list.appendChild(div);
        });
    }

    // ---------- SLIDER LOGIC + E0 UPDATE ----------
    const sliders = {
        R: document.getElementById('sliderR'),
        D: document.getElementById('sliderD'),
        Lf: document.getElementById('sliderLf'),
        Ls: document.getElementById('sliderLs'),
        Lt: document.getElementById('sliderLt'),
        Lp: document.getElementById('sliderLp'),
        Ll: document.getElementById('sliderLl'),
        gamma: document.getElementById('sliderGamma'),
    };

    const displays = {
        R: document.getElementById('valR'),
        D: document.getElementById('valD'),
        Lf: document.getElementById('valLf'),
        Ls: document.getElementById('valLs'),
        Lt: document.getElementById('valLt'),
        Lp: document.getElementById('valLp'),
        Ll: document.getElementById('valLl'),
        gamma: document.getElementById('valGamma'),
    };

    function updateAll() {
        // update displays
        for (let key in sliders) {
            displays[key].innerText = parseFloat(sliders[key].value).toFixed(2);
        }

        // compute X = R - D + sum(lambda)
        const R = parseFloat(sliders.R.value);
        const D = parseFloat(sliders.D.value);
        const Lf = parseFloat(sliders.Lf.value);
        const Ls = parseFloat(sliders.Ls.value);
        const Lt = parseFloat(sliders.Lt.value);
        const Lp = parseFloat(sliders.Lp.value);
        const Ll = parseFloat(sliders.Ll.value);
        const gamma = parseFloat(sliders.gamma.value);

        const X = R - D + Lf + Ls + Lt + Lp + Ll;
        const rawE0 = Math.tanh(X);
        // for simplicity we show raw (no recursive, but it's fine)
        const e0 = rawE0;

        document.getElementById('e0Value').innerText = e0.toFixed(2);
        const fillPercent = (e0 + 1) * 50; // map -1..1 to 0..100
        document.getElementById('e0Fill').style.width = Math.min(100, Math.max(0, fillPercent)) + '%';
        document.getElementById('computedE0').innerText = 'Eâ‚€ = ' + e0.toFixed(2);

        // fake cost estimate: lower when more local
        const localRatio = 0.62; // demo
        document.getElementById('costEstimate').innerText = '$' + Math.floor(120 * (1 - localRatio));
        document.getElementById('apiSavings').innerText = `âš¡ ${Math.round(localRatio*100)}% local`;
    }

    for (let key in sliders) {
        sliders[key].addEventListener('input', updateAll);
    }

    // ---------- FAKE CALL SIMULATION ----------
    let callType = 'boss';
    window.setCallType = (type) => {
        callType = type;
        document.getElementById('fakeCallStatus').innerText = `Selected: ${type} call`;
    };
    window.triggerFakeCall = () => {
        const scripts = {
            boss: "Boss: 'We have an emergency, call me now!'",
            mom: "Mom: 'Beta, I'm worried, call me back.'",
            friend: "Friend: 'Hey! Remember last week? Call me!'"
        };
        alert('ğŸ“ INCOMING CALL:\n' + (scripts[callType] || scripts.boss));
        document.getElementById('fakeCallStatus').innerText = 'Call ended Â· 3 min distraction';
    };

    // ---------- OTHER DEMO FUNCTIONS ----------
    window.startBreathing = () => {
        alert('ğŸ§˜ Breathing exercise started (4â€‘4â€‘4). Follow the animation.');
    };
    window.playGame = () => {
        alert('ğŸ® Game: reverse counting from 40 to 1. Say it aloud!');
    };
    window.startPunishment = () => {
        alert('Punishment: 40 seconds of breathing. Complete to earn back points.');
    };
    window.setLanguage = (lang) => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        alert('Language switched to ' + lang + ' (UI would update)');
    };

    // init
    renderBM();
    updateAll();

    // periodic update for demo
    setInterval(() => {
        // randomly wiggle sliders a bit
        for (let key in sliders) {
            if (key !== 'gamma') {
                let newVal = parseFloat(sliders[key].value) + (Math.random()*0.06 - 0.03);
                newVal = Math.min(parseFloat(sliders[key].max), Math.max(parseFloat(sliders[key].min), newVal));
                sliders[key].value = newVal.toFixed(2);
            }
        }
        updateAll();
    }, 4000);
</script>
</body>
</html>